<tr>
  <td class="w-full max-w-0 py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:w-auto sm:max-w-none sm:pl-6">
    <%= product.name %>
    <dl class="font-normal lg:hidden">
      <dt class="sr-only"><%= product.class.human_attribute_name(:description) %></dt>
      <dd class="mt-1 truncate text-gray-700"><%= product.description %></dd>
    </dl>
  </td>
  <td class="hidden px-3 py-4 text-sm text-gray-500 lg:table-cell">
    <%= product.description %>
  </td>
  <td class="hidden px-3 py-4 text-sm text-gray-500 sm:table-cell">
    <%= humanized_money_with_symbol(product.price) %>
  </td>
  <td class="py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6">
    <%- ordered_product = order.ordered_products.find_or_initialize_by(product: product) %>
    <%# TODO: Extract minus and plus buttons into components %>
    <%- minus_quantity = [ordered_product.quantity - 1, 0].max %>
    <%- minus_method = minus_quantity.zero? ? :delete : :put %>
    <%= render "buttons/minus", disabled: ordered_product.quantity.zero?, method: minus_method, title: t('.remove'), href: [order.space, order.room, order.marketplace, order, ordered_product, { ordered_product: { quantity: minus_quantity, product_id: product.id} }] %>

    <%= ordered_product.quantity %>

    <%- add_quantity = ordered_product.quantity + 1 %>
    <%- add_method = add_quantity == 1 ? :post : :put %>
    <%= render "buttons/plus", method: add_method, title: t('.add'), href: [order.space, order.room, order.marketplace, order, ordered_product, { ordered_product: {quantity: add_quantity, product_id: product.id} }] %>
  </td>
</tr>
